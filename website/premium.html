<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Flute Music Premium</title>
<link rel="stylesheet" href="style.css">

<style>
body{
  background:#0b1220;
  color:white;
  font-family:Arial;
  margin:0;
}

.premium-container{
  max-width:900px;
  margin:auto;
  padding:60px 20px;
  text-align:center;
}

.premium-title{
  font-size:42px;
  color:#FFD700;
}

.cards{
  display:flex;
  gap:25px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top:40px;
}

.card{
  background:#111827;
  padding:30px;
  border-radius:15px;
  width:260px;
  box-shadow:0 0 25px rgba(255,215,0,0.15);
}

.card h3{
  color:#FFD700;
}

.buy-btn{
  margin-top:20px;
  padding:12px 20px;
  background:#FFD700;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer;
  font-weight:bold;
  color:#0b1220;
  transition:all 0.3s ease;
}

.buy-btn:hover{
  transform:scale(1.05);
  background:#ffed4e;
}
</style>
</head>

<body>

<div class="premium-container">

<h1 class="premium-title">üíé Flute Music Premium</h1>
<p>Upgrade your music experience with powerful premium features.</p>

<div class="cards">

<div class="card">
<h3>Basic Premium</h3>
<p>‚úî All Filters</p>
<p>‚úî Effects Access</p>
<p>‚úî Premium Playback</p>
<p>‚úî Priority Support</p>
<p style="color:#FFD700;font-size:24px;margin:10px 0;">TEST MODE</p>

<button class="buy-btn" onclick="startPayment('monthly')">Buy ‚Çπ299 / month</button>
</div>

<div class="card">
<h3>Lifetime Premium</h3>
<p>‚úî Everything Included</p>
<p>‚úî Lifetime Access</p>
<p>‚úî Future Updates</p>
<p>‚úî VIP Features</p>
<p style="color:#FFD700;font-size:24px;margin:10px 0;">Custom Price</p>

<button class="buy-btn" onclick="startPayment('lifetime')">Buy ‚Çπ999 one-time</button>
</div>

</div>

<br><br>

<a href="index.html" style="color:#9ca3af;">‚Üê Back to Home</a>

</div>

<script>
function contactForLifetime() {
  alert('For Lifetime Premium pricing, please join our support server:\nhttps://discord.gg/A5R9HWGkfF');
}
</script>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
const plans = {
  monthly: { amount: 29900, description: '1 month of premium features' },
  lifetime: { amount: 99900, description: 'Lifetime premium access' }
};

async function startPayment(plan) {
  const userId = prompt('Enter your Discord user ID (e.g. 123456789012345678)');
  if (!userId) return alert('Discord ID is required to grant premium.');
  const userEmail = prompt('Enter your email (optional)');

  try {
    const res = await fetch('/api/create-order', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ plan, userEmail: userEmail || '', userId })
    });
    const data = await res.json();
    if (!data.success) throw new Error(data.error || 'Order creation failed');

    const options = {
      key: data.key,
      amount: data.amount,
      currency: data.currency,
      name: 'Flute Music Premium',
      description: plans[plan].description,
      order_id: data.orderId,
      handler: async function (response) {
        // verify payment on server
        const verify = await fetch('/api/verify-payment', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(response)
        });
        const v = await verify.json();
        if (v.success) {
          alert('Payment successful! You now have premium access.');
        } else {
          alert('Payment verified, but something went wrong: ' + (v.error || v.message));
        }
      },
      prefill: {
        email: userEmail || ''
      },
      notes: {
        plan: plan,
        userId: userId
      }
    };

    const rzp = new Razorpay(options);
    rzp.open();
  } catch (err) {
    console.error(err);
    alert('Error starting payment: ' + err.message);
  }
}
</script>

</body>
</html>